{% extends "index.html" %}
{% load catalog_tags %}
{% block title %}
  {{ course.course_number }}
{% endblock %}
{% block css %}
  {#  <link href="http://cdn.datatables.net/1.10.8/css/jquery.dataTables.min.css" rel="stylesheet">#}
  <link href="https://cdn.datatables.net/1.10.8/css/dataTables.bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/responsive/1.0.7/css/responsive.bootstrap.min.css" rel="stylesheet">
{% endblock %}
{% block js %}
  <script src="https://cdn.datatables.net/1.10.8/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.8/js/dataTables.bootstrap.min.js"></script>
  <script src="https://cdn.datatables.net/responsive/1.0.7/js/dataTables.responsive.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.0.3/js/dataTables.buttons.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.0.3/js/buttons.bootstrap.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/1.0.3/js/buttons.colVis.min.js"></script>
{% endblock %}
{% block body %}
  <ol class="breadcrumb">
    <li><a href="{% url 'course_catalog:catalog' %}">Course Catalog</a></li>
    <li><a href="{% url 'course_catalog:discipline' course.discipline.discipline %}">{{ course.discipline }}</a></li>
    <li class="active">{{ course.course_title }}</li>
  </ol>
    <div class="panel-group" id="accordion-{{ course.course_number }}" role="tablist" aria-multiselectable="true">
      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="{{ course.course_number }}">
          <h4 class="panel-title">
            <a style="display: block" role="button" data-toggle="collapse"
               data-parent="#accordion{{ course.course_number }}" href="#collapse-{{ course.course_number }}"
               aria-expanded="true" aria-controls="collapseOne">
              <div class="row">
                <div class="col-xs-12 col-sm-3"><b>{{ course.course_number }}</b></div>
                <div class="col-xs-12 col-sm-6">{{ course.course_title }}</div>
                <div class="col-xs-12 col-sm-3"><span
                        class="label label-danger pull-sm-right pull-md-right pull-lg-right">{{ course.credit_hours }} credit{{ course.credit_hours|pluralize }}</span>
                </div>
              </div>
            </a>
          </h4>
        </div>
        <div id="collapse-{{ course.course_number }}" class="panel-collapse collapse in" role="tabpanel"
             aria-labelledby="{{ course.course_number }}">
          <div class="panel-body">
            <div class="row">
              <div class="col-xs-12 col-sm-8" style="text-align: justify">{{ course.description }}</div>
              <div class="col-xs-12 col-sm-4">
                <table class="table table-condensed">
                  <tr>
                    <td><b>Fall Availability: </b></td>
                    <td>{% availability_tag course.fall_availability %}</td>
                  </tr>
                  <tr>
                    <td><b>Spring Availability:</b></td>
                    <td>{% availability_tag course.spring_availability %}</td>
                  </tr>
                  <tr>
                    <td><b>Summer Availability:</b></td>
                    <td>{% availability_tag course.summer_availability %}</td>
                  </tr>
                  <tr>
                    <td><b>Alternating Years:</b></td>
                    <td>{% availability_tag course.alternating_years %}</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div style="max-width:400px" class="center-block">
    <form method="get">
      <label for="term" class="control-label sr-only">View Sections:</label>
    <div style="padding-top:10px; padding-bottom: 10px; text-align: center;">
      <select name="term" id="term" class="selectpicker show-tick" data-style="btn-default btn-lg btn-block" data-width="100%" title="Select Term to View Sections">
        {% for term in terms %}
          <option value="{{ term.term_code }}">{{ term.term_name }}</option>
        {% endfor %}
      </select>
    </div>
      <button class="btn btn-default btn-lg btn-block" type="submit">Show me the Sections!</button>
    </form>
  </div>
  <br>
    {% if sections %}
      <h3 style="text-align: center">Sections for {{ current_term.term_name }}</h3>
      <table id="sections" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
        <tr>
          <th>Section</th>
          <th>Campus</th>
          <th>Course Open?</th>
          <th>Professor</th>
          <th>Seats</th>
          <th>Class Type</th>
          <th>Room Number</th>
          <th>Meeting Day</th>
          <th>Start Time</th>
          <th>End Time</th>
          <th>Call Number</th>
          <th>Last Updated</th>
        </tr>
        </thead>
        <tbody>
        {% for section in object_list %}
          {% section_table_row section %}
        {% endfor %}
        </tbody>
        <tfoot>
        <tr>
          <th>Section</th>
          <th>Campus</th>
          <th>Course Open?</th>
          <th>Professor</th>
          <th>Seats</th>
          <th>Class Type</th>
          <th>Room Number</th>
          <th>Meeting Day</th>
          <th>Start Time</th>
          <th>End Time</th>
          <th>Call Number</th>
          <th>Last Updated</th>
        </tr>
        </tfoot>
      </table>
      <script>
        $(document).ready(function () {
          $('#sections').DataTable({
            responsive: true,
            'columnDefs': [
              {
                'orderable': false,
                'targets': [3, 7, 8]
              }
            ]
          });
        });
      </script>
    {% endif %}
{% endblock %}